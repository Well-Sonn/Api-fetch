let fetch,fs;_d34‍.w("node-fetch",[["default",["fetch"],function(v){fetch=v}]]);_d34‍.w("fs",[["default",["fs"],function(v){fs=v}]]);


function fetchAndSaveData() {
    const agora = new Date();
    agora.setDate(agora.getDate() - 1);

    fetch('https://eth.blockscout.com/api/v2/addresses/0x62a2a550e200F09C45a7C76E36244B349009F2a7/transactions')
        .then((response) => response.json())
        .then((data) => {
            const transactions = data.items;
            const transacoesUltimas24h = transactions.filter(transaction => {
                const timestamp = new Date(transaction.timestamp);
                return timestamp > agora;
            });

            const transacoesFormatadas = transacoesUltimas24h.map(transaction => {
                return {
                    hash: transaction.hash,
                    from: transaction.from.hash,
                    to: transaction.to.hash,
                    valor: transaction.value,
                    data: new Date(transaction.timestamp).toLocaleDateString(),
                    hora: new Date(transaction.timestamp).toLocaleTimeString(),
                    descricao: transaction.tx_types.join(', ')
                };
            });

            const jsonData = JSON.stringify(transacoesFormatadas, null, 2);

            // Define o caminho do arquivo JSON
            const outputFilePath = 'C:\\Users\\welle\\OneDrive\\Área de Trabalho\\transacoes.json';

            // Salva o JSON no arquivo
            const fs = _d34‍.t("require")('fs');
            fs.writeFileSync(outputFilePath, jsonData, (err) => {
                if (err) {
                    _d34‍.g.console.error('Erro ao salvar o arquivo:', err);
                } else {
                    _d34‍.g.console.log('Dados salvos com sucesso em:', outputFilePath);
                }
            });
        })
        .catch((error) => {
            // Trata erros durante a requisição
            _d34‍.g.console.error('Erro durante a requisição:', error);
        });
}

// Chama a função para coletar e salvar os dados
fetchAndSaveData();
